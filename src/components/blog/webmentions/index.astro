---
import { getWebmentionsForUrl } from "@/utils/webmentions";
import Comments from "./Comments.astro";
import Likes from "./Likes.astro";

const url = new URL(Astro.url.pathname, Astro.site);

const webMentions = await getWebmentionsForUrl(`${url}`);

// Return if no webmentions
if (!webMentions.length) return;
---

<hr class="webmentions-divider" />
<div class="webmentions-list">
  <Likes mentions={webMentions} />
  <Comments mentions={webMentions} />
</div>
<p class="webmentions-footer">
  Powered by{" "}
  <a href="https://webmention.io" rel="noreferrer" target="_blank"
    >Webmentions</a
  >
</p>
